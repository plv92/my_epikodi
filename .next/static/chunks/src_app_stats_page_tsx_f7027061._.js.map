{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/plv92/Desktop/TEK3/Epikodi/src/app/stats/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\";\nimport { Music, TrendingUp, Calendar } from \"lucide-react\";\n\ntype Track = {\n  id: number;\n  title: string;\n  artist: string;\n};\n\ntype TopTrack = {\n  track: Track;\n  playCount: number;\n};\n\ntype Stats = {\n  topTracks: TopTrack[];\n  totalListens: number;\n  uniqueTracks: number;\n  listensByDay: Record<string, number>;\n};\n\nexport default function StatsPage() {\n  const [stats, setStats] = useState<Stats | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  const fetchStats = async () => {\n    try {\n      const res = await fetch(\"/api/stats\");\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      const data = await res.json();\n      setStats(data);\n    } catch (error) {\n      console.error(\"Erreur chargement stats:\", error);\n      setStats(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\">Chargement...</div>;\n  }\n\n  if (!stats) {\n    return <div className=\"text-center py-12\">Erreur de chargement</div>;\n  }\n\n  const chartData = Object.entries(stats.listensByDay).map(([date, count]) => ({\n    date: new Date(date).toLocaleDateString(\"fr-FR\", { day: \"numeric\", month: \"short\" }),\n    écoutes: count,\n  }));\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      <h1 className=\"text-3xl font-bold mb-6\">Statistiques d'écoute</h1>\n\n      {/* Statistiques générales */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n        <div className=\"bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg p-6 text-white\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <Music size={24} />\n            <h3 className=\"text-lg font-semibold\">Total d'écoutes</h3>\n          </div>\n          <p className=\"text-4xl font-bold\">{stats.totalListens}</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg p-6 text-white\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <TrendingUp size={24} />\n            <h3 className=\"text-lg font-semibold\">Titres uniques</h3>\n          </div>\n          <p className=\"text-4xl font-bold\">{stats.uniqueTracks}</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-green-500 to-green-700 rounded-lg p-6 text-white\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <Calendar size={24} />\n            <h3 className=\"text-lg font-semibold\">Moy. par jour</h3>\n          </div>\n          <p className=\"text-4xl font-bold\">\n            {Object.keys(stats.listensByDay).length > 0\n              ? Math.round(stats.totalListens / Object.keys(stats.listensByDay).length)\n              : 0}\n          </p>\n        </div>\n      </div>\n\n      {/* Graphique d'écoutes par jour */}\n      {chartData.length > 0 && (\n        <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg p-6 mb-8\">\n          <h2 className=\"text-xl font-semibold mb-4\">Écoutes des 7 derniers jours</h2>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart data={chartData}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#444\" />\n              <XAxis dataKey=\"date\" stroke=\"#888\" />\n              <YAxis stroke=\"#888\" />\n              <Tooltip \n                contentStyle={{ \n                  backgroundColor: '#1f2937', \n                  border: '1px solid #374151',\n                  borderRadius: '8px',\n                  color: '#fff'\n                }} \n              />\n              <Bar dataKey=\"écoutes\" fill=\"#3b82f6\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n      )}\n\n      {/* Top tracks */}\n      <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg p-6\">\n        <h2 className=\"text-xl font-semibold mb-4\">Top 10 des titres les plus écoutés</h2>\n        {stats.topTracks.length === 0 ? (\n          <p className=\"text-gray-400 text-center py-8\">Aucune écoute pour le moment</p>\n        ) : (\n          <div className=\"space-y-3\">\n            {stats.topTracks.map((item, index) => (\n              <div\n                key={item.track.id}\n                className=\"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\n              >\n                <div className=\"text-2xl font-bold text-gray-400 w-8 text-center\">\n                  {index + 1}\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"font-semibold\">{item.track.title}</div>\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">{item.track.artist}</div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"font-bold text-blue-500\">{item.playCount}</div>\n                  <div className=\"text-xs text-gray-400\">écoutes</div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}